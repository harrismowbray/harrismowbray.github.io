<html>
    <head>
        <title>Harris' Casino</title>
        <style>
            body{
                background-color: green;
            }
            .putchipshere{
                background-color: green;
                border: orange 3px solid;
                color: orange;
                height: 120px;
                width: 120px;
                border-radius: 100%;
            }
            .putchipsheregray{
                background-color: green;
                border: #bbb 3px solid;
                color: #bbb;
                height: 120px;
                width: 120px;
                border-radius: 100%;
            }
            .putchipsheregray:hover{
                color: #bbb;
                background-color: green;
            }
            .putchipshere:hover{
                background-color: orange;
                color: black;
            }
            #gametitle{
                width: 70%;
                margin-left: 15%;
                margin-right: 15%;
                text-align: center;
                font-family: Verdana;
                font-size: 48px;
                border: #660001 2px solid;
                border-width: 0px 0px 2px 0px;
                outline: 0px;
            }
            select{
                color: black;
                background-color: green;
                border: white 1px solid;
                outline: none;
            }
            #cashp{
                text-align: center;
                font-family: Verdana;
                font-size: 48px;
                margin-top: 0px;
                margin-bottom: 0px;
            }
            .settings{
                margin-top: 0px;
                text-align: center;
                font-family: Verdana, Geneva, Tahoma, sans-serif;
            }
            #playershand1, #dealershand{
                font-family: Verdana;
                text-align: center;
            }
            #playershand2, #playershand3, #playershand4{
                font-family: Verdana;
                text-align: center;   
            }
            button{
                font-size: 24px;
                margin: 2px;
                border: none;
                border-radius: 20px;
                color: black;
            }
            #currencymark1{
                color: white;
            }
            .center{
                text-align: center;
                font-size: 100px;
                margin: 0px;
            }
            .center p{
                margin: 0px;
            }
            #dealerspeech, .playerspeech{
                font-size: 24px;
                color: white;
                font-family: Verdana;
            }
            .playerspeech{
                text-decoration: dotted underline;
            }
            .chip{
                height: 95px;
                width: 95px;
                border-radius: 100%;
                border: 10px black solid;
                text-align: center;
            }
            #chip_1{
                background-color: white;
                border: 10px gold solid;
            }
            #chip_5{
                background-color: #660001;
                color: white;
            }
            #chip_25{
                background-color: darkgreen;
                color: white;
            }
            #chip_100{
                background-color: #222;
                color: white;
            }
            #chip_500{
                background-color: #69008c;
                color: white;
            }
            #setting div{
                float: left;
                margin-right: 4px;
            }
            #setting{
                display: inline-block;
            }
        </style>
    </head>
    <body>
        <select id="gametitle" onchange="changegame()">
            <option value="baccarat">Baccarat</option>
            <option selected value="blackjack">Blackjack</option>
            <option value="war">Casino War</option>
            <option value="threecardpoker">Three Card Poker</option>
            <!-- TO ADD
                -Blackjack
                -Spanish 21
                -Blackjack Switch
                -Ultimate Texas Holdem
                -Mississippi Stud
                -DJ Wild
                -Free Bet Blackjack
                -Double Draw Poker
                -Criss Cross Poker
                -I Luv Suits (High Card Flush)
                -Let It Ride
            -->
        </select>
        <div class="game" id="baccaratgame">
            <div id="setting" class="settings">
                <div><b>Settings</b> | </div>
                <div class="baccarat_content">
                    Tie Payout:
                    <select id="tiepayout">
                        <option selected value="8to1">8:1</option>
                        <option value="9to1">9:1</option>
                    </select>
                </div>
                <div class="baccarat_content">
                    Ruleset:
                    <select id="baccaratruleset">
                        <option value="ez">EZ</option>
                        <option selected value="puntobanco">Punto Banco</option>
                        <option value="super6">Super 6</option>
                    </select>
                </div>
                <div class="baccarat_content">
                    Baccarat Decks:
                    <select id="baccaratdecks">
                        <option value="6">6</option>
                        <option selected value="8">8</option>
                    </select>
                </div>
                <div class="war_content">
                    Double Tie Bonus:
                    <select id="doubletie">
                        <option selected value="single">No</option>
                        <option value="double">Yes</option>
                    </select>
                </div>
                <div class="war_content">
                    Casino War Decks:
                    <select id="casinowardecks">
                        <option selected value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                    </select>
                </div>
                <div class="threecardpoker_content">
                    Mini Royale Bonus:
                    <select id="miniroyale">
                        <option selected value="5">5:1</option>
                        <option value="10">10:1</option>
                    </select>
                </div>
                <div class="blackjack_content">
                    Blackjack Decks:
                    <select id="blackjackdecks">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="4">4</option>
                        <option selected value="6">6</option>
                        <option value="8">8</option>
                    </select>
                </div>
                <div class="blackjack_content">
                    Double after Split:
                    <select id="blackjackdas">
                        <option selected value="true">Yes</option>
                        <option value="true">No</option>
                    </select>
                </div>
                <div class="blackjack_content">
                    Number of Splits:
                    <select id="blackjackmaxsplits">
                        <option selected value="2">1</option>
                        <option value="3">2</option>
                        <option value="4">3</option>
                    </select>
                </div>
                <div class="blackjack_content">
                    Soft 17:
                    <select id="blackjacksoft17">
                        <option selected value="hit">Hit</option>
                        <option value="stand">Stand</option>
                    </select>
                </div>
                <div class="blackjack_content">
                    Split Aces:
                    <select id="blackjackhitsplitaces">
                        <option value="true">Hit/Resplit</option>
                        <option value="maybe">Hit/No Resplit</option>
                        <option selected value="false">No Hit/No Resplit</option>
                    </select>
                </div>
                <div class="blackjack_content">
                    Surrender:
                    <select id="blackjacksurrendertoggle">
                        <option value="true">Late</option>
                        <option selected value="false">No</option>
                    </select>
                </div>
                <div class="blackjack_content">
                    Hole Card:
                    <select id="blackjackholecard">
                        <option selected value="american">Yes</option>
                        <option value="european">No</option>
                    </select>
                </div>
                <div class="blackjack_content">
                    Blackjack Payout:
                    <select id="blackjackpayout">
                        <option selected value="32">3:2</option>
                        <option value="65">6:5</option>
                    </select>
                </div>
            </div>
            <br>
            <br>
            <div class="center">
                <p id="dealerspeech">üí¨ "Good luck"</p>
                <p>ü§µ‚Äç‚ôÄÔ∏è <span id="dealershand">üÇ†üÇ†</span></p>
                <div class="baccarat_content">
                    <button id="baccaratplayerbet" class="putchipshere" onclick="makebid('baccarat', 'player')">Playerü•∑<br><span id="betval_baccarat_player1"></span><span class='cent'>¬¢</span></button>
                    <button id="baccaratdealerbet" class="putchipshere" onclick="makebid('baccarat', 'dealer')">Dealerü§µ‚Äç‚ôÄÔ∏è<br><span id="betval_baccarat_dealer1"></span><span class='cent'>¬¢</span></button>
                    <button id="baccarattiebet" class="putchipshere" onclick="makebid('baccarat', 'tie')">Tie<br><span id="betval_baccarat_tie1"></span><span class='cent'>¬¢</span></button>
                    <button id="baccaratplayerbetfake" class="hide putchipsheregray">Playerü•∑<br><span id="betval_baccarat_player2"></span><span class='cent'>¬¢</span></button>
                    <button id="baccaratdealerbetfake" class="hide putchipsheregray">Dealerü§µ‚Äç‚ôÄÔ∏è<br><span id="betval_baccarat_dealer2"></span><span class='cent'>¬¢</span></button>
                    <button id="baccarattiebetfake" class="hide putchipsheregray">Tie<br><span id="betval_baccarat_tie2"></span><span class='cent'>¬¢</span></button>
                </div>
                <div class="war_content">
                    <button class="putchipshere" id="warante" onclick="makebid('war', 'ante')">Ante<br><span id="betval_war_ante1"></span><span class='cent'>¬¢</span></button>
                    <button class="hide putchipshere" id="wartie" onclick="makebid('war', 'tie')">Tie<br><span id="betval_war_tie1"></span><span class='cent'>¬¢</span></button>
                    <button id="warantefake" class="hide putchipsheregray">Bet<br><span id="betval_war_ante2"></span><span class='cent'>¬¢</span></button>
                    <button id="wartiefake" class="putchipsheregray">Tie<br><span id="betval_war_tie2"></span><span class='cent'>¬¢</span></button>
                </div>
                <div class="threecardpoker_content">
                    <button id="threecardpokerante" class="putchipshere" onclick="makebid('threecardpoker', 'ante')">Ante<br><span id="betval1"></span><span class='cent'>¬¢</span></button>
                    <button id="threecardpokerantefake" class="hide putchipsheregray">Ante<br><span id='betval2'></span><span class='cent'>¬¢</span></button>
                    <button id="threecardpokerplayfake" class="putchipsheregray">Play<br>(<span class='cent'>¬¢</span>)</button>
                    <button id="threecardpokerplay" class="hide putchipshere" onclick="decision('play')">Play<br>(<span id='betval3'></span><span class='cent'>¬¢</span>)</button>
                </div>
                <div class="blackjack_content">
                    <button id="blackjackante" class="putchipshere" onclick="makebid('blackjack', 'ante')">Ante<br><span id="betval_blackjack1"></span><span class='cent'>¬¢</span></button>
                    <button id="blackjackantefake" class="hide putchipsheregray">Ante<br><span id='betval_blackjack2'></span><span class='cent'>¬¢</span></button>
                </div>
                <p style="margin-top: -50px">
                    <span class="playerspeech" id="casinoadvice" onclick="givecasinoadvice()">üí¨ "Gambling advice?"</span>
                    <span class="playerspeech hide war_content" style="display: none" id="wardeal" onclick="spincasinowar()">üí¨ "Deal!"</span>
                    <span class="playerspeech hide blackjack_content" style="display: none" id="blackjackdeal" onclick="spinblackjack()">üí¨ "Deal!"</span>
                    <span class="playerspeech hide baccarat_content" id="baccaratdeal" onclick="spinbaccarat()">üí¨ "Deal!"</span>
                    <span class="playerspeech hide threecardpoker_content" style="display: none" id="threecarddeal" onclick="spinthreecard()">üí¨ "Deal!"</span>
                    <span class="playerspeech" id="politicalopinion" onclick="givepoliticalopinion()">üí¨ "Let's talk politics"</span>    
                    <span class="playerspeech threecardpoker_content hide" id="threecardfold" onclick="decision('surrender')">üí¨ "Fold"</span>
                    <span class="playerspeech blackjack_content hide" id="blackjackhit" onclick="decision('hit')">üí¨ "Hit"</span>
                    <span class="playerspeech blackjack_content hide" id="blackjackstand" onclick="decision('stand')">üí¨ "Stand"</span>
                    <span class="playerspeech blackjack_content hide" id="blackjackdouble" onclick="decision('double')">üí¨ "Double" (-<span id="betval_blackjack4"></span><span class="cent"></span>)</span>
                    <span class="playerspeech blackjack_content hide" id="blackjacksplit" onclick="decision('split')">üí¨ "Split" (-<span id="betval_blackjack3"></span><span class="cent"></span>)</span>
                    <span class="playerspeech blackjack_content hide" id="blackjackinsurance" onclick="decision('insurance')">üí¨ "Insurance" (-<span id="betval_blackjackhalf"></span><span class="cent"></span>)</span>
                    <span class="playerspeech blackjack_content hide" id="blackjacknoinsurance" onclick="decision('noinsurance')">üí¨ "No thanks"</span>
                    <span class="playerspeech blackjack_content hide" id="blackjacksurrender" onclick="decision('surrender')">üí¨ "Surrender" (+<span id="betval_blackjackhalf2"></span><span class="cent"></span>)</span>
                    <span class="playerspeech war_content hide" id="warwar" onclick="decision('war')">üí¨ "Go to war" (-<span id="betval_war_ante3"></span><span class='cent'>¬¢</span>)</span>
                    <span class="playerspeech war_content hide" id="warsurrender" onclick="decision('surrender')">üí¨ "Surrender" (+<span id="betval_war_antehalf"></span><span class='cent'>¬¢</span>)</span>    
                </p>
                <div id="playerlist">
                    <p id="player1">ü•∑ <span id="playershand1">üÇ†üÇ†</span></span></p>
                    <p id="player2" class="hide">ü•∑üèª <span id="playershand2">üÇ†üÇ†</span></span></p>
                    <p id="player3" class="hide">ü•∑üèΩ <span id="playershand3">üÇ†üÇ†</span></span></p>
                    <p id="player4" class="hide">ü•∑üèø <span id="playershand4">üÇ†üÇ†</span></span></p>
                </div>
            </div>
        </div>
        <p id="cashp"><span id="cashamount" style="color:white" onclick="function cplus(){currencycounter++};cplus();updateCash(0)"></span><span id="currencymark1" onclick="function cplus(){currencycounter++};cplus();updateCash(0)"><span class='cent'>¬¢</span></span>
            <button class="chip" id="chip_1" onclick="betamount(1)">1<span class="cent">¬¢</span></button>
            <button class="chip" id="chip_5" onclick="betamount(5)">5<span class="cent">¬¢</span></button>
            <button class="chip" id="chip_25" onclick="betamount(25)">25<span class="cent">¬¢</span></button>
            <button class="chip" id="chip_100" onclick="betamount(100)">100<span class="cent">¬¢</span></button>
            <button class="chip" id="chip_500" onclick="betamount(500)">500<span class="cent">¬¢</span></button>
        </p>
    </body>
    <script>
        person = 1
        cash = 100
        resultcolor = ""
        region = ""
        result = 0
        currencycounter = 0
        const currencies = ["¬¢", "¬§", "‚Ç¨", "‚Ç¥", "‚Çæ", "‚Ç™", "÷è"]
        bids = {
            baccarat: {},
            blackjack: {},
            threecardpoker: {},
            war: {},
        }
        bidmore = true
        frenchdeck = "üÇ¢üÇ£üÇ§üÇ•üÇ¶üÇßüÇ®üÇ©üÇ™üÇ´üÇ≠üÇÆüÇ°üÇ≤üÇ≥üÇ¥üÇµüÇ∂üÇ∑üÇ∏üÇπüÇ∫üÇªüÇΩüÇæüÇ±üÉÇüÉÉüÉÑüÉÖüÉÜüÉáüÉàüÉâüÉäüÉãüÉçüÉéüÉÅüÉíüÉìüÉîüÉïüÉñüÉóüÉòüÉôüÉöüÉõüÉùüÉûüÉë"
        cardorder = "23456789TJQKA"
        straightorder = "AKQJT98765432 A32"
        cardname = {}
        for(x = 0; x < Array.from(frenchdeck).length; x++) cardname[Array.from(frenchdeck)[x]] = cardorder[x % 13] + "SHDC"[Math.floor(x / 13)]
        decks = {
            deck6: Array.from(frenchdeck.repeat(6)),
            deck7: Array.from(frenchdeck.repeat(7)),
            deck8: Array.from(frenchdeck.repeat(8)),
        }
        splitcount = 1
        game = "blackjack"
        shuffleddeck = []
        Ppoints = Dpoints = 0
        PlayersHand = DealersHand = ""
        hands = {
            Dealer: {
                hand: "",
                points: "",
            },
            Player1: {
                hand: "",
                points: "",
                double: 1,
            },
            Player2: {
                hand: "",
                points: "",
                double: 1,
            },
            Player3: {
                hand: "",
                points: "",
                double: 1,
            },
            Player4: {
                hand: "",
                points: "",
                double: 1,
            },
        }

        function updateCash(num){
            cash += num
            cash = Math.round(cash * 100) / 100
            cashamount.textContent = new Intl.NumberFormat('en-US').format(cash)
            currencymark1.textContent = currencies[currencycounter % currencies.length]
            document.querySelectorAll('.cent').forEach(example => { example.innerHTML = currencies[currencycounter % currencies.length] })
            if(cash < 0) alert("no money; skill issue")
        }

        function changegame(){
            //document.getElementById(game + "_settings").style.display = "none"
            shuffle()
            bidmore = true
            game = gametitle.value
            gamelist = ["threecardpoker", "war", "baccarat", "blackjack", "blackjack-freebet"]
            for(gm of gamelist) document.querySelectorAll('.' + gm + "_content").forEach(el => el.style.display = 'none')
            document.querySelectorAll('.' + game.split("-")[0] + "_content").forEach(el => el.style.display = '')
            document.querySelectorAll('settings').forEach(el => el.style.display = 'none')
            document.querySelectorAll('.hide').forEach(el => el.style.display = 'none')

        }


        function givepoliticalopinion(){
            funfacts = [
                "Biden 2028",
                "No",
                "What is politics?",
                "Ban ¬∞Fahrenheit",
                "Bruh",
                "I love Mongolia",
                "I'm offended",
                "We're in a casino",
                "Free Georgia from Russian occupation",
            ]
            dealerspeech.textContent = `üí¨ "${funfacts[Math.floor(funfacts.length * Math.random())]}"`
        }
        function givecasinoadvice(){
            if(game == "threecardpoker"){
                dealerspeech.textContent = `üí¨ "Fold Q-6-3 & lower"`
            }
            else if(game == "war"){
                dealerspeech.textContent = `üí¨ "Go to War during a tie"`
            }
            else if(game == "baccarat"){
                dealerspeech.textContent = `üí¨ "Bet on the ${baccaratruleset.value == "super6" ? "Player" : "Dealer"}"`
            }
            else if(game.startsWith("blackjack")){
                dealerspeech.textContent = `üí¨ "Look up basic strategy on Wikipedia lol"`
            }
        }


        function recievemoney(/* game */){
            decisioninfo = []
            //
            for(bid of Object.entries(bids[game])){
                if(game == "baccarat"){
                    baccaratplayerbet.style.display = baccaratdealerbet.style.display = baccarattiebet.style.display = ""
                    baccaratplayerbetfake.style.display = baccaratdealerbetfake.style.display = baccarattiebetfake.style.display = "none"
                    betval_baccarat_dealer1.textContent = betval_baccarat_dealer2.textContent = betval_baccarat_player1.textContent = betval_baccarat_player2.textContent = betval_baccarat_tie1.textContent = betval_baccarat_tie2.textContent = ""
                    switch(bid[0]){
                        case "tie":
                            if(Dpoints == Ppoints) updateCash((tiepayout.value == "9to1" ? 10 : 9) * bid[1])
                            break
                        case "player":
                            if(!(Dpoints > Ppoints)) updateCash(2 * bid[1])
                            break
                        case "dealer":
                            if(!(Dpoints < Ppoints)){
                                if(baccaratruleset.value == "super6"){
                                    updateCash((Dpoints == 6 ? 1.5 : 2) * bid[1])
                                }
                                else if(baccaratruleset.value == "ez"){
                                    updateCash(((Dpoints == 7 && Array.from(DealersHand).length == 3) ? 1 : 2) * bid[1])
                                }
                                else{
                                    updateCash(1.95 * bid[1])
                                }
                            }
                            //
                            break
                    }
                }
                else if(game == "war"){
                    switch(bid[0]){
                        case "ante":
                            if(Ppoints > Dpoints) updateCash(2 * bid[1])
                            else if(Ppoints == Dpoints){
                                decisioninfo = bid
                            }
                            break
                        case "tie":
                            if(Ppoints == Dpoints) updateCash(11 * bid[1])
                            break
                    }
                }
                else if(game == "threecardpoker"){
                    decisioninfo = bid
                    dealershand.innerHTML = "üÇ†üÇ†üÇ†"
                }
            }
            bidmore = true
            bids[game] = {}
        }




        function makebid(activity, word){
            game = activity

            if(bidmore){
                if((chipvalue > cash)){
                    alert("Not enough money")
                }
                else if(activity == "threecardpoker" && (+chipvalue + +bids.threecardpoker.ante) > cash){
                        alert("Not enough money")
                }
                else{
                    bids[game][word] = bids[game][word] ? +bids[game][word] + +chipvalue : +chipvalue
                    updateCash(-1 * chipvalue)

                    if(game == "threecardpoker"){
                        dealershand.textContent = playershand1.textContent = "üÇ†üÇ†üÇ†"
                        betval1.textContent = betval2.textContent = betval3.textContent = bids.threecardpoker.ante
                        threecarddeal.style.display = casinoadvice.style.display = politicalopinion.style.display =  ""
                    }
                    else if(game.startsWith("blackjack")){
                        dealerspeech.textContent = `üí¨ "Good luck"`
                        player2.style.display = player3.style.display = player4.style.display = "none"
                        hands.Player1.double = hands.Player2.double = hands.Player3.double = hands.Player4.double = 1
                        dealershand.textContent = playershand1.textContent = "üÇ†üÇ†"
                        betval_blackjack1.textContent = betval_blackjack2.textContent = betval_blackjack3.textContent = betval_blackjack4.textContent = bids.blackjack.ante
                        betval_blackjackhalf.textContent = betval_blackjackhalf2.textContent = bids.blackjack.ante / 2
                        blackjackdeal.style.display = casinoadvice.style.display = politicalopinion.style.display = ""
                    }
                    else if(game == "war"){
                        wardeal.style.display = ""
                        if(word == "tie") betval_war_tie1.textContent = betval_war_tie2.textContent = bids[game][word]
                        else if(word == "ante"){
                            wartie.style.display = ""
                            wartiefake.style.display = "none"
                            betval_war_ante1.textContent = betval_war_ante2.textContent = betval_war_ante3.textContent = bids[game][word]
                        }
                        betval_war_antehalf.textContent = bids[game][word] / 2
                    }
                    else if(game == "baccarat"){
                        baccaratdeal.style.display = ""
                        if(word == "player") betval_baccarat_player1.textContent = betval_baccarat_player2.textContent = bids[game][word]
                        else if(word == "tie") betval_baccarat_tie1.textContent = betval_baccarat_tie2.textContent = bids[game][word]
                        else if(word == "dealer") betval_baccarat_dealer1.textContent = betval_baccarat_dealer2.textContent = bids[game][word]
                    }

                }
            }
        }


        function shuffle(){
            if(game == "baccarat") shuffleddeck = [...decks["deck" + baccaratdecks.value].sort( () => Math.random() -0.5 )]
            else if(game == "war") shuffleddeck = [...decks["deck" + casinowardecks.value].sort( () => Math.random() -0.5 )]
            else if(game.startsWith("blackjack")) shuffleddeck = [...decks["deck" + blackjackdecks.value].sort( () => Math.random() -0.5 )]
            else shuffleddeck = [...Array.from(frenchdeck).sort( () => Math.random() -0.5 )]
        }


        function spinbaccarat(){
            baccaratplayerbet.style.display = baccaratdealerbet.style.display = baccarattiebet.style.display = "none"
            PlayersHand = DealersHand = dealershand.textContent = playershand1.textContent = baccaratplayerbetfake.style.display = baccaratdealerbetfake.style.display = baccarattiebetfake.style.display = ""
            PlayersHand += shuffleddeck.pop()
            PlayersHand += shuffleddeck.pop()
            DealersHand += shuffleddeck.pop()
            DealersHand += shuffleddeck.pop()
            Ppoints = pointify(PlayersHand)
            Dpoints = pointify(DealersHand)
            playershand1.innerHTML = `${cardcolor(PlayersHand)}`
            dealershand.innerHTML = `${cardcolor(DealersHand)}`


            if(Ppoints < 8 && Dpoints < 8){
                if(Ppoints < 6){
                    setTimeout(drawPlayer, 300)
                    newcard = pointify(Array.from(PlayersHand))[2]
                    if(
                        (Dpoints < 3) || 
                        (Dpoints == 4 && newcard != 8) || 
                        (Dpoints == 5 && newcard > 1 && newcard < 8) || 
                        (Dpoints == 6 && newcard > 3 && newcard < 8)|| 
                        (Dpoints == 7 && newcard == 6 && newcard == 7)
                    ){
                        setTimeout(drawDealer, 600)
                    }
                }
                else if(Dpoints < 6) setTimeout(drawDealer, 300)
            }
            setTimeout(recievemoney, 800)
        }

        function betamount(amount){
            document.getElementById("chip_" + chipvalue).style.borderColor = "black"
            chipvalue = +amount
            document.getElementById("chip_" + chipvalue).style.borderColor = "gold"
        }

        function spinthreecard(){
            dealershand.textContent = playershand1.textContent = ""
            PlayersHand = DealersHand = ""
            PlayersHand += shuffleddeck.pop()
            PlayersHand += shuffleddeck.pop()
            PlayersHand += shuffleddeck.pop()
            playershand1.innerHTML = cardcolor(PlayersHand)
            dealershand.innerHTML = "üÇ†üÇ†üÇ†"
            threecarddeal.style.display = politicalopinion.style.display = threecardpokerplayfake.style.display = threecardpokerante.style.display = "none"
            threecardfold.style.display = threecardpokerplay.style.display = threecardpokerantefake.style.display = ""
            Ppoints = pointify(PlayersHand)
        }

        function spinblackjack(){
            splitcount = 1
            dealershand.textContent = playershand1.textContent = playershand2.textContent = ""
            player2.style.display = player3.style.display = player4.style.display = "none"
            hands.Player1.hand = hands.Dealer.hand = hands.Player2.hand = hands.Player3.hand = hands.Player4.hand = ""
            hands.Player1.hand += shuffleddeck.pop()
            hands.Player1.hand += shuffleddeck.pop()
            playershand1.innerHTML = cardcolor(hands.Player1.hand)
            hands.Dealer.hand += shuffleddeck.pop()
            hands.Player1.points = pointify(hands.Player1.hand)
            dealershand.innerHTML = cardcolor(hands.Dealer.hand + "üÇ†")
            hands.Dealer.hand += shuffleddeck.pop()
            hands.Dealer.points = pointify(hands.Dealer.hand)
            if(blackjackholecard.value == "american" && pointify(hands.Dealer.hand)[0] == 10 && hands.Dealer.points == "21/11"){
                dealerspeech.textContent = `üí¨ "I win with blackjack!"`
                blackjackantefake.style.display = blackjackdeal.style.display = "none"
                betval_blackjack1.textContent = betval_blackjack2.textContent = betval_blackjack3.textContent = betval_blackjack4.textContent = blackjackante.style.display = ""
                bids.blackjack = {}
            }
            else if(hands.Player1.points == "21/11"){
                dealershand.innerHTML = cardcolor(hands.Dealer.hand)
                hands.Dealer.points = pointify(hands.Dealer.hand)
                if(hands.Dealer.points == "21/11"){
                    updateCash(bids.blackjack.ante)
                    dealerspeech.textContent = `üí¨ "Our blackjacks tie each other"`
                }
                else{
                    dealerspeech.textContent = `üí¨ "You win with blackjack!"`
                    updateCash((blackjackpayout.value == "32" ? 2.5 : 2.2) * bids.blackjack.ante)
                }
                blackjackantefake.style.display = blackjackdeal.style.display = "none"
                betval_blackjack1.textContent = betval_blackjack2.textContent = betval_blackjack3.textContent = betval_blackjack4.textContent = blackjackante.style.display = ""
                bids.blackjack = {}
            }
            else if(blackjackholecard.value == "american" && "üÇ°üÇ±üÉÅüÉë".includes(Array.from(hands.Dealer.hand)[0]) && hands.Player1.points != "21/11"){
                blackjackdeal.style.display = politicalopinion.style.display = blackjackante.style.display = "none"
                blackjackinsurance.style.display = blackjacknoinsurance.style.display = blackjackantefake.style.display = ""
                blackjackstand.style.display = blackjackhit.style.display = blackjackdouble.style.display = blackjacksplit.style.display = blackjacksurrender.style.display = "none"
            }
            else{
                if(pointify(Array.from(hands.Player1.hand)[0]) == pointify(Array.from(hands.Player1.hand)[1]) && player2.style.display == "none") blackjacksplit.style.display = ""
                dealerspeech.textContent = `üí¨ "You have ${hands.Player1.points} points"`
                blackjackdeal.style.display = politicalopinion.style.display = blackjackante.style.display = "none"
                blackjackhit.style.display = blackjackstand.style.display = blackjackdouble.style.display = blackjackantefake.style.display = ""
                if(blackjacksurrendertoggle.value == "true") blackjacksurrender.style.display = ""
            }
        }

        function spincasinowar(){
            dealershand.textContent = playershand1.textContent = ""
            PlayersHand = DealersHand = ""
            PlayersHand += shuffleddeck.pop()
            DealersHand += shuffleddeck.pop()
            Ppoints = pointify(PlayersHand)
            Dpoints = pointify(DealersHand)
            playershand1.innerHTML = cardcolor(PlayersHand)
            dealershand.innerHTML = cardcolor(DealersHand)
            if(Ppoints != Dpoints){
                betval_war_ante1.textContent = betval_war_tie1.textContent = ""
            }
            else{
                wardeal.style.display = politicalopinion.style.display = "none"
                warwar.style.display = warsurrender.style.display = ""
                warantefake.style.display = wartiefake.style.display = ""
                warante.style.display = wartie.style.display = "none"
                betval_war_tie2.textContent = ""
            }
            setTimeout(recievemoney, 800)
        }

        function cardcolor(text){
            return Array.from(text).map(x => `<span style="color:${"üÇ≤üÇ≥üÇ¥üÇµüÇ∂üÇ∑üÇ∏üÇπüÇ∫üÇªüÇΩüÇæüÇ±üÉÇüÉÉüÉÑüÉÖüÉÜüÉáüÉàüÉâüÉäüÉãüÉçüÉéüÉÅ".includes(x) ? "#660001" : "black"}" >${x}</span>`).join("")
        }

        function drawPlayer(){
            PlayersHand += shuffleddeck.pop()
            Ppoints = pointify(PlayersHand)
            playershand1.innerHTML = `${cardcolor(PlayersHand)}`
        }

        function drawDealer(){
            DealersHand += shuffleddeck.pop()
            Dpoints = pointify(DealersHand)
            dealershand.innerHTML = `${cardcolor(DealersHand)}`
        }


        function dealDealerBlackjack(){
            hands.Dealer.points = pointify(hands.Dealer.hand)
            setTimeout(function() {
                hands.Dealer.hand += shuffleddeck.pop()
                hands.Dealer.points = pointify(hands.Dealer.hand)
                dealershand.innerHTML = `${cardcolor(hands.Dealer.hand)}`
                //
                if(+("" + hands.Dealer.points).split("/")[0] < 17 || (hands.Dealer.points == "17/7" && blackjacksoft17.value == "hit")) dealDealerBlackjack()
                else{
                    for(maxsplits = 1; maxsplits <= blackjackmaxsplits.value; maxsplits++){
                        if(document.getElementById("player" + maxsplits).style.display != "none"){
                            if(+("" + hands.Dealer.points).split("/")[0] > 21){
                                dealerspeech.textContent = (maxsplits == 1 && hands.Player1.double != 0) ? `üí¨ "I busted, you win"` : `üí¨ "Good luck"`
                                updateCash(2 * bids.blackjack.ante * hands["Player" + maxsplits].double)
                                //BJpay
                            }
                            else if(+("" + hands["Player" + maxsplits].points).split("/")[0] > +("" + hands.Dealer.points).split("/")[0]){
                                dealerspeech.textContent = (maxsplits == 1 && hands.Player1.double != 0) ? `üí¨ "You win with more points"` : `üí¨ "Good luck"`
                                updateCash(2 * bids.blackjack.ante * hands["Player" + maxsplits].double)
                                                                //BJpay
                            }
                            else if(+("" + hands["Player" + maxsplits].points).split("/")[0] == +("" + hands.Dealer.points).split("/")[0]){
                                dealerspeech.textContent = (maxsplits == 1 && hands.Player1.double != 0) ? `üí¨ "Push (tie), nobody wins or loses"` : `üí¨ "Good luck"`
                                updateCash(bids.blackjack.ante * hands["Player" + maxsplits].double)
                                                                //BJpay
                            }
                            else{
                                dealerspeech.textContent = (maxsplits == 1 && hands.Player1.double != 0) ? `üí¨ "I win with ${("" + hands.Dealer.points).split("/")[0]} points"`  : `üí¨ "Good luck"`
                            }
                        }
                    }
                    blackjackantefake.style.display = "none"
                    betval_blackjack1.textContent = betval_blackjack2.textContent = betval_blackjack3.textContent = betval_blackjack4.textContent = blackjackante.style.display = ""
                    bids.blackjack = {} 
                }
            }, 500);
        }

        
        function pointify(items){
            if(game == "baccarat"){
                h = Array.from(items).map(x => isNaN(cardname[x][0]) ? {T: 0, J: 0, Q: 0, K: 0, A: 1}[cardname[x][0]] : cardname[x][0])
                if(h.length == 3) return (+h[0] + +h[1] + +h[2]) % 10
                else return (+h[0] + +h[1]) % 10
            }
            else if(game == "war"){
                return Array.from(items).map(x => isNaN(cardname[x][0]) ? {T: 10, J: 11, Q: 12, K: 13, A: 14}[cardname[x][0]] : cardname[x][0])[0]
            }
            else if(game.startsWith("blackjack")){
                normalvalue = Array.from(items).map(x => isNaN(cardname[x][0]) ? {T: 10, J: 10, Q: 10, K: 10, A: 1}[cardname[x][0]] : cardname[x][0])
                normalvalueadded = normalvalue.reduce((x, y) => +x + +y, 0)
                return ((normalvalue.includes(1) && normalvalueadded <= 11) ? ((+normalvalueadded + 10) + "/") : "") + normalvalueadded
            }
            else if(game == "threecardpoker"){
                // 5 straight flush, 4 three of a kind, 3 straight, 2 flush, 1 pair, 0 nothing
                trescards = Array.from(items).map(x => cardname[x]).sort((a, b) => cardorder.indexOf(b[0]) - cardorder.indexOf(a[0]))
                if((trescards[0][1] == trescards[1][1] && trescards[1][1] == trescards[2][1]) && straightorder.includes(trescards[0][0] + trescards[1][0] + trescards[2][0])){
                    level = 5 //straightflush
                }
                else if(trescards[0][0] == trescards[1][0] && trescards[1][0] == trescards[2][0]){
                    level = 4 //3kind
                }
                else if(straightorder.includes(trescards[0][0] + trescards[1][0] + trescards[2][0])){
                    level = 3 //straight
                }
                else if(trescards[0][1] == trescards[1][1] == trescards[2][1]){
                    level = 2 //flush
                }
                else if(trescards[0][0] == trescards[1][0] || trescards[1][0] == trescards[2][0] || trescards[2][0] == trescards[0][0]){
                    level = 1 //pair
                }
                else{
                    level = 0 //highcard
                }
                return [level, trescards[0][0] + trescards[1][0] + trescards[2][0]]
            }
        }


        function decision(decide){
            if(game == "war"){
                wardeal.style.display = politicalopinion.style.display = ""
                warwar.style.display = warsurrender.style.display = "none"
                if(decide == "surrender"){
                    updateCash(0.5 * decisioninfo[1])
                    warantefake.style.display = "none"
                    warante.style.display = ""
                    betval_war_ante1.textContent = ""
                }
                else if(decide == "war"){
                    updateCash(-1 * decisioninfo[1])
                    PlayersHand += shuffleddeck.pop()
                    DealersHand += shuffleddeck.pop()
                    Ppoints = pointify(PlayersHand)
                    Dpoints = pointify(DealersHand)
                    setTimeout(function(){ playershand1.innerHTML = `<span>${PlayersHand}</span>` }, 400)
                    setTimeout(function(){ dealershand.innerHTML = `<span>${DealersHand}</span>` }, 800)
                    setTimeout(function(){
                        if(Ppoints > Dpoints) updateCash(3 * decisioninfo[1])
                        else if(Ppoints == Dpoints) updateCash((doubletie.value == "double" ? 4 : 3) * decisioninfo[1])
                        warantefake.style.display = wartiefake.style.display = "none"
                        warante.style.display = wartie.style.display = ""
                        betval_war_ante1.textContent = ""
                    }, 1000)
                }
                bidmore = true
            }
            else if(game.startsWith("blackjack")){
                if(decide == "hit"){
                    blackjacksplit.style.display = blackjackdouble.style.display = blackjackinsurance.style.display = blackjacksurrender.style.display = "none"
                    hands["Player" + person].hand += shuffleddeck.pop()
                    hands["Player" + person].points = pointify(hands["Player" + person].hand)
                    document.getElementById("playershand" + person).innerHTML = cardcolor(hands["Player" + person].hand)
                    if(+("" + hands["Player" + person].points).split("/")[0] < 21){
                        dealerspeech.textContent = `üí¨ "You have ${hands["Player" + person].points} points"`
                    }
                    else if(+("" + hands["Player" + person].points).split("/")[0] == 21){
                        dealerspeech.textContent = `üí¨ "Great, you have 21 points!"`
                        decision("stand")
                    }
                    else{
                        dealerspeech.textContent = `üí¨ "${hands["Player" + person].points} points, too many, you lose"`
                        if(person != splitcount && document.getElementById("player" + splitcount).style.display != "none"){
                            person++
                            first = playerlist.firstElementChild
                            playerlist.insertAdjacentHTML('beforeend', first.outerHTML)
                            first.remove()
                            if(blackjackdas.value == "true") blackjackdouble.style.display = ""
                            if(blackjacksurrendertoggle.value == "true") blackjacksurrender.style.display = ""
                            if(pointify(Array.from(hands["Player" + person].hand)[0]) == pointify(Array.from(hands["Player" + person].hand)[1]) && document.getElementById("player" + blackjackmaxsplits.value).style.display == "none") blackjacksplit.style.display = ""
                        }
                        else{
                            dealershand.innerHTML = cardcolor(hands.Dealer.hand)
                            blackjackantefake.style.display  = blackjackhit.style.display = blackjackstand.style.display = blackjackdouble.style.display = blackjacksurrender.style.display = "none"
                            betval_blackjack1.textContent = betval_blackjack2.textContent = betval_blackjack3.textContent = betval_blackjack4.textContent = blackjackante.style.display = politicalopinion.style.display = ""
                            bids.blackjack = {}
                        }
                    }
                }
                else if(decide == "stand"){
                    politicalopinion.style.display = ""
                    if(person != splitcount && document.getElementById("player" + splitcount).style.display != "none" && !(blackjackhitsplitaces.value == "false" && hands.Player1.points == "12/2")){
                        person++
                        first = playerlist.firstElementChild
                        playerlist.insertAdjacentHTML('beforeend', first.outerHTML)
                        first.remove()
                        if(blackjackdas.value == "true") blackjackdouble.style.display = ""
                        if(blackjacksurrendertoggle.value == "true") blackjacksurrender.style.display = ""
                        if(pointify(Array.from(hands["Player" + person].hand)[0]) == pointify(Array.from(hands["Player" + person].hand)[1]) && document.getElementById("player" + blackjackmaxsplits.value).style.display == "none") blackjacksplit.style.display = ""
                    }
                    else{
                        blackjackhit.style.display = blackjackstand.style.display = blackjackdouble.style.display = blackjackinsurance.style.display = blackjacksplit.style.display = blackjacksurrender.style.display = "none"
                        dealershand.innerHTML = cardcolor(hands.Dealer.hand)
                        hands.Dealer.points = pointify(hands.Dealer.hand)
                        if(+("" + hands.Dealer.points).split("/")[0] < 17 || (hands.Dealer.points == "17/7" && blackjacksoft17.value == "hit")) dealDealerBlackjack()
                        else{
                            for(maxsplits = 1; maxsplits <= blackjackmaxsplits.value; maxsplits++){
                                if(document.getElementById("player" + maxsplits).style.display != "none"){
                                    if(+("" + hands.Dealer.points).split("/")[0] > 21 || (+("" + hands.Dealer.points).split("/")[0] < 21 && +("" + hands["Player" + person].points).split("/")[0] > +("" + hands.Dealer.points).split("/")[0])){
                                    //dealer over 21 or player more points
                                        updateCash(2 * bids.blackjack.ante * hands["Player" + person].double)
                                    }
                                    else if(+("" + hands.Dealer.points).split("/")[0] == +("" + hands["Player" + person].points).split("/")[0]){
                                    //tie
                                        updateCash(bids.blackjack.ante * hands["Player" + person].double)
                                    }
                                }
                            }
                            blackjackantefake.style.display = "none"
                            betval_blackjack1.textContent = betval_blackjack2.textContent = betval_blackjack3.textContent = betval_blackjack4.textContent = blackjackante.style.display = ""
                            bids.blackjack = {}
                        }
                    }
                }
                else if(decide == "double"){
                    hands["Player" + person].double = 2
                    updateCash(-1 * bids.blackjack.ante)
                    hands["Player" + person].hand += shuffleddeck.pop()
                    hands["Player" + person].points = pointify(hands["Player" + person].hand)
                    document.getElementById("playershand" + person).innerHTML = cardcolor(hands["Player" + person].hand)
                    politicalopinion.style.display = ""
                    decision("stand")
                }
                else if(decide == "insurance"){
                    blackjacknoinsurance.style.display = blackjackinsurance.style.display = blackjacksplit.style.display = "none"
                    updateCash(-.5 * bids.blackjack.ante)
                    hands.Dealer.points = pointify(hands.Dealer.hand)
                    dealershand.innerHTML = cardcolor(hands.Dealer.hand)
                    if(hands.Dealer.points == "21/11"){
                        updateCash(1.5 * bids.blackjack.ante)
                        dealerspeech.textContent = `üí¨ "I had blackjack, but insurance saved you"`
                        decision("stand")
                    }
                    else{
                        decision("noinsurance")
                    }
                }
                else if(decide == "noinsurance"){
                    blackjacknoinsurance.style.display = blackjackinsurance.style.display = "none"
                    if(pointify(hands.Dealer.hand) == "21/11"){
                        dealerspeech.textContent = `üí¨ "I had blackjack, sorry"`
                        decision("stand")
                    }
                    else{
                        blackjackdouble.style.display = blackjackhit.style.display = blackjackstand.style.display = "" 
                        if(blackjacksurrendertoggle.value == "true") blackjacksurrender.style.display = ""
                        if(pointify(Array.from(hands.Player1.hand)[0]) == pointify(Array.from(hands.Player1.hand)[1]) && document.getElementById("player" + blackjackmaxsplits.value).style.display == "none") blackjacksplit.style.display = ""
                    }
                }
                else if(decide == "surrender"){
                    updateCash(.5 * bids.blackjack.ante)
                    hands["Player" + person].double = 0
                    decision("stand")
                }
                else if(decide == "split"){
                    splitcount++
                    updateCash(-1 * bids.blackjack.ante)
                    document.getElementById("player" + splitcount).style.display = ""
                    hands["Player" + splitcount].hand = Array.from(hands["Player" + person].hand)[1]
                    hands["Player" + person].hand = Array.from(hands["Player" + person].hand)[0]
                    hands["Player" + person].hand += shuffleddeck.pop()
                    hands["Player" + splitcount].hand += shuffleddeck.pop()
                    document.getElementById("playershand" + person).innerHTML = cardcolor(hands["Player" + person].hand)
                    document.getElementById("playershand" + splitcount).innerHTML = cardcolor(hands["Player" + splitcount].hand)
                    //HERE
                    if(pointify(Array.from(hands["Player" + person].hand)[0]) != pointify(Array.from(hands["Player" + person].hand)[1]) || document.getElementById("player" + blackjackmaxsplits.value).style.display != "none" || (blackjackhitsplitaces.value != "true" && hands["Player" + person].points == "12/2")) blackjacksplit.style.display = "none"
                    if(blackjackhitsplitaces.value == "false" && hands["Player" + person].points == "12/2") decision("stand")
                }
            }
            else if(game == "threecardpoker"){
                threecardfold.style.display = threecardpokerplay.style.display = "none"
                threecarddeal.style.display = politicalopinion.style.display = casinoadvice.style.display = ""
                if(decide == "play"){
                
                    betval1.textContent = betval2.textContent = betval3.textContent = ""
                    updateCash(-1 * bids.threecardpoker.ante)

                    DealersHand += shuffleddeck.pop()
                    DealersHand += shuffleddeck.pop()
                    DealersHand += shuffleddeck.pop()

                    
                    dealershand.innerHTML = cardcolor(DealersHand)
                    Dpoints = pointify(DealersHand)
                    queenqualify = 3 //false

                    //ante bonus
                    if(Ppoints[0] == 3) updateCash(bids.threecardpoker.ante)
                    else if(Ppoints[0] == 4) updateCash(4 * bids.threecardpoker.ante)
                    else if(Ppoints[0] == 5){
                        if(Ppoints[1].startsWith("A") && Ppoints[1].endsWith("Q")) updateCash(miniroyale.value * bids.threecardpoker.ante)
                        else updateCash(5 * bids.threecardpoker.ante)
                    }

                    //
                    if("QKA".includes(Dpoints[1][0]) || Dpoints[0] !== 0){
                        queenqualify = 4
                    }
                    if(Ppoints[0] > Dpoints[0]){
                        updateCash(queenqualify * bids.threecardpoker.ante)
                    }
                    else if(Ppoints[0] == Dpoints[0]){
                        if(Ppoints[1] == Dpoints[1]){
                            updateCash(2 * bids.threecardpoker.ante)
                        }
                        else if(Ppoints[0] == 5 || Ppoints[0] == 3){
                            if(straightorder.indexOf(Ppoints[1]) < straightorder.indexOf(Dpoints[1])){
                                updateCash(queenqualify * bids.threecardpoker.ante)      
                            }
                        }
                        else if(Ppoints[0] == 4){
                            if(cardorder.indexOf(Ppoints[1][0]) > cardorder.indexOf(Dpoints[1][0])){
                                updateCash(queenqualify * bids.threecardpoker.ante)      
                            }
                        }
                        else if(Ppoints[0] == 2 || Ppoints[0] == 0){
                            if(cardorder.indexOf(Ppoints[1][0]) > cardorder.indexOf(Dpoints[1][0])){
                                updateCash(queenqualify * bids.threecardpoker.ante)      
                            }
                            else if(Ppoints[1][0] == Dpoints[1][0] && cardorder.indexOf(Ppoints[1][1]) > cardorder.indexOf(Dpoints[1][1])){
                                updateCash(queenqualify * bids.threecardpoker.ante)      
                            }
                            else if(Ppoints[1][0] == Dpoints[1][0] && Ppoints[1][1] == Dpoints[1][1] && cardorder.indexOf(Ppoints[1][2]) > cardorder.indexOf(Dpoints[1][2])){
                                updateCash(queenqualify * bids.threecardpoker.ante)      
                            }
                        }
                        else if(Ppoints[0] == 1){
                            if(cardorder.indexOf(Ppoints[1][1]) > cardorder.indexOf(Dpoints[1][1])){
                                updateCash(queenqualify * bids.threecardpoker.ante)      
                            }
                            else if(Ppoints[1][1] == Dpoints[1][1] && (cardorder.indexOf(Ppoints[1][0]) > cardorder.indexOf(Dpoints[1][0]) || cardorder.indexOf(Ppoints[1][2]) > cardorder.indexOf(Dpoints[1][2]))){
                                updateCash(queenqualify * bids.threecardpoker.ante)      
                            }
                        }
                    }
                }
                else if(decide == "fold"){
                    DealersHand += shuffleddeck.pop()
                    DealersHand += shuffleddeck.pop()
                    DealersHand += shuffleddeck.pop()
                    dealershand.innerHTML = cardcolor(DealersHand)
                }
                bids.threecardpoker = {} 
                threecardpokerplayfake.style.display = threecardpokerante.style.display = ""
                threecardpokerantefake.style.display = threecardpokerplay.style.display = "none"
                bidmore = true
            }
        }


        cash = 25000
        chipvalue = 1
        updateCash(0)

        changegame()


    </script>
</html>