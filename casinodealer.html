<html>
    <head>
        <style>
            #thegame{
                width: 50%;
                margin-left: 25%;
                margin-right: 25%;
                text-align: center;
                font-size: 60px;
            }
            select{
                outline: none;
                background-color: green;
                border: 0px solid black;
                border-radius: 20px;
            }
            *{
                font-family: Verdana;
            }
            *::selection{
                background-color: black;
                color: white;
            }
            .hide{
                display: none
            }
            body{
                background-color: #146b36;
            }
            h3{
                font-size: 100px;
                margin-bottom: 0px;
                font-weight: 400;
                margin-top: 20px;
            }
            #chips{
                margin-left: 20%;
                margin-right: 20%;
                width: 60%;
            }
            h6{
                font-size: 20px;
            }
            .chip_1{
                background-color: #fff;
            }
            .chip_0{
                background-color: #146b36;
                border: white 10px solid !important;
                color: white;
            }
            .chip_2p5{
                background-color: fuchsia;
                color: black;
            }
            .chip_5{
                background-color: #660001;
                color: white;
            }
            .chip_25{
                background-color: greenyellow;
                color: black;
            }
            .chip_100{
                background-color: #222;
                color: white;
            }
            .chip_500{
                background-color: #69008c;
                color: white;
            }
            .chip_1000{
                background-color: orange;
                color: black;
            }
            .chip_5000{
                background-color: brown;
                color: white;
            }
            /*
            .chip_25000{
                background-color: darkslateblue;
                color: white;
            }
            .chip_250000{
                background-color: lightgreen;
                color: black;
            } */
            .chip{
                height: 85px;
                width: 85px;
                border-radius: 100%;
                border: 10px black solid;
                text-align: center;
            }
            .smallchip{
                height: 35px;
                width: 35px;
                border-radius: 100%;
                border: 2px black solid;
                text-align: center;
            }
            .chiplist, h1, h3, h4, h6{
                text-align: center;
            }
            h4{
                font-weight: 400;
                font-size: 28px;
            }
            h4 span{
                text-decoration: underline;
                text-decoration-style: dashed;
            }
            #typeofbet{
                font-weight: 700;
                text-decoration-style: double;
            }
        </style>
    </head>
    <body>
        <select id="thegame" onchange="changeGame()">
            <option value="blackjack">Blackjack</option>
            <option value="blackjack-switch">Blackjack Switch</option>
            <option value="war">Casino War</option>
            <option value="doubledraw">Double Draw Poker</option>
            <option value="blackjack-freebet">Free Bet Blackjack</option>
            <option value="letitride">Let It Ride</option>
            <option value="mississippi">Mississippi Stud</option>
            <option selected value="threecardpoker">Three Card Poker</option>
            <option value="texas">Ultimate Texas Hold'Em</option>
        </select>
        <div class="hide" id="war_content">
            <b>Double Ties</b>:
            <select id="doubletie">
                <option selected value="single">1:1</option>
                <option value="double">2:1</option>
            </select>
        </div>
        <div class="hide" id="threecardpoker_content">
            <b>Ante Bonus</b>
            <select id="antebonus" onchange="togle()">
                <option value="yes">Yes</option>
                <optio value="no">No</option>
            </select>
            <div id="antebonuscontent">
                Mini Royal
                <select id="miniroyal">
                    <option selected value="10">10:1</option>
                    <option value="5">5:1</option>
                </select>
                Straight Flush
                <select>
                    <option>5:1</option>
                </select>
                Three of a Kind
                <select>
                    <option>4:1</option>
                </select>
                Straight
                <select>
                    <option>1:1</option>
                </select>
            </div>
            <br>
            <b>PairPlus</b>
            <br>
            Mini Royal:
            <select id="pairplusminiroyal">
                <option value="200">200:1</option>
                <option selected value="100">100:1</option>
            </select>
            Straight Flush:
            <select id="pairplusstraightflush">
                <option selected value="50">50:1</option>
                <option value="40">40:1</option>
            </select>
            Three of a Kind:
            <select>
                <option>30:1</option>
            </select>
            Straight:
            <select>
                <option>6:1</option>
            </select>
            Flush:
            <select>
                <option>4:1</option>
            </select>
            Pair:
            <select>
                <option>1:1</option>
            </select>
        </div>
        <div class="hide" id="blackjack_content">
            <b>Blackjack</b> (natural 21)
            <select id="blackjackbonus">
                <option selected value="1.5">3:2</option>
                <option value="1.2">6:5</option>
            </select>
        </div>
        <div class="hide" id="mississippi_content">
            Royal Flush:
            <select>
                <option value="500">500:1</option>
            </select>
            Straight Flush:
            <select>
                <option value="50">100:1</option>
            </select>
            Four of a Kind:
            <select>
                <option>40:1</option>
            </select>
            Full House:
            <select>
                <option>10:1</option>
            </select>
            Flush:
            <select>
                <option>6:1</option>
            </select>
            Straight:
            <select>
                <option>4:1</option>
            </select>
            Three of a Kind:
            <select>
                <option>3:1</option>
            </select>
            Two Pair:
            <select>
                <option>2:1</option>
            </select>
            Pair (Jack-Ace):
            <select>
                <option>1:1</option>
            </select>
            Pair (6-10):
            <select>
                <option>Push</option>
            </select>
        </div>
        <div class="hide" id="letitride_content">
            Royal Flush:
            <select>
                <option value="1000">1000:1</option>
            </select>
            Straight Flush:
            <select>
                <option value="200">200:1</option>
            </select>
            Four of a Kind:
            <select>
                <option>50:1</option>
            </select>
            Full House:
            <select>
                <option>11:1</option>
            </select>
            Flush:
            <select>
                <option>8:1</option>
            </select>
            Straight:
            <select>
                <option>5:1</option>
            </select>
            Three of a Kind:
            <select>
                <option>3:1</option>
            </select>
            Two Pair:
            <select>
                <option>2:1</option>
            </select>
            Pair (10s or better):
            <select>
                <option>1:1</option>
            </select>
        </div>
        <div class="hide" id="texas_content">
            <b>Blind</b>
            Royal Flush:
            <select>
                <option value="500">500:1</option>
            </select>
            Straight Flush:
            <select>
                <option value="50">50:1</option>
            </select>
            Four of a Kind:
            <select>
                <option>10:1</option>
            </select>
            Full House:
            <select>
                <option>3:1</option>
            </select>
            Flush:
            <select>
                <option>3:2</option>
            </select>
            Straight:
            <select>
                <option>1:1</option>
            </select>
            Other Win:
            <select>
                <option>Push</option>
            </select>
        </div>
        <div class="hide" id="doubledraw_content">
            <b>Bonus</b>
            Five of a Kind:
            <select>
                <option value="500">500:1</option>
            </select>
            Royal Flush:
            <select>
                <option value="500">100:1</option>
            </select>
            Wild Royal Flush:
            <select>
                <option value="50">50:1</option>
            </select>
            Straight Flush:
            <select>
                <option value="50">50:1</option>
            </select>
            Four of a Kind:
            <select>
                <option>10:1</option>
            </select>
            Full House:
            <select>
                <option>5:1</option>
            </select>
            Flush:
            <select>
                <option>3:1</option>
            </select>
            Straight:
            <select>
                <option>2:1</option>
            </select>
            Three of a Kind:
            <select>
                <option>1:1</option>
            </select>
            Two Pair:
            <select>
                <option>Push</option>
            </select>
        </div>
        <h3>👨‍🌾<span id="playercards"></span></h3>
        <h3 class="hide" id="secondhand">👨‍🌾<a id="playercards2"></a></h3>
        <div id="bidsdiv"></div>
        <h3><span id="middlecards"></span></h3>
        <h3><span id="dealericon" onclick="changedealer()">🤵‍♀️</span><a id="dealercards"></a></h3>
        <h4 id="decide">👨‍🌾's <span id="typeofbet">ante</span> is a (<span onclick="claimDecide('win')">WIN</span> / <span onclick="claimDecide('push')">PUSH</span> / <span onclick="claimDecide('loss')">LOSS</span>)</h4>
        <div id="chips">
            <br>
            <button onclick="raiseAmount(1)" class="chip chip_1">$1</button>
            <button onclick="raiseAmount(2.5)" class="chip chip_2p5">$2.5</button>
            <button onclick="raiseAmount(5)" class="chip chip_5">$5</button>
            <button onclick="raiseAmount(25)" class="chip chip_25">$25</button>
            <button onclick="raiseAmount(100)" class="chip chip_100">$100</button>
            <button onclick="raiseAmount(500)" class="chip chip_500">$500</button>
            <button onclick="raiseAmount(1000)" class="chip chip_1000">$1000</button>
            <button onclick="raiseAmount(5000)" class="chip chip_5000">$5000</button>
            <!-- 
            <button onclick="raiseAmount(25000)" class="chip chip_25000">$25000</button>
            <button onclick="raiseAmount(250000)" class="chip chip_250000">$250000</button>
            -->
        </div>
    </body>
    <script>

        function changedealer(){
            dealericon.textContent = dealericon.textContent == "🤵‍♀️" ? "🤵‍♂️" : "🤵‍♀️"
        }

        bidcount = 0

        bids = {
            "ante (#1)": 0,
            "ante (#2)": 0,
            tie: 0,
            ante: 0,
            play: 0,
            pairplus: 0,
        }


        playerhand = dealerhand = playerhand2 = middlehand = ""
        game = "threecardpoker"


        frenchdeck = "🂢🂣🂤🂥🂦🂧🂨🂩🂪🂫🂭🂮🂡🂲🂳🂴🂵🂶🂷🂸🂹🂺🂻🂽🂾🂱🃂🃃🃄🃅🃆🃇🃈🃉🃊🃋🃍🃎🃁🃒🃓🃔🃕🃖🃗🃘🃙🃚🃛🃝🃞🃑"
        jokerfrenchdeck = "🂢🂣🂤🂥🂦🂧🂨🂩🂪🂫🂭🂮🂡🂲🂳🂴🂵🂶🂷🂸🂹🂺🂻🂽🂾🂱🃂🃃🃄🃅🃆🃇🃈🃉🃊🃋🃍🃎🃁🃒🃓🃔🃕🃖🃗🃘🃙🃚🃛🃝🃞🃑🃏︎🃟"
        shuffleddeck = Array.from(frenchdeck)
        threecardstraightorder = "AKQJT98765432 A32"
        cardorder = "23456789TJQKA"
        jokercardorder = "23456789TJQKAW"

        suits = ["clubs", "diamonds", "hearts", "spades"]

        cardname = {}
        for(x = 0; x < Array.from(frenchdeck).length; x++) cardname[Array.from(frenchdeck)[x]] = cardorder[x % 13] + "SHDC"[Math.floor(x / 13)]
        cardname["🃟"] = cardname["🃏︎"] = "WW"
        chips.style.display = "none"
        step = amount = owedfunds = 0

        function raiseAmount(am){
            amount += am
            theamount.textContent = amount
            if(amount == Math.floor(owedfunds * 2) / 2){
                decide.innerHTML = `Correct!`
                setTimeout(decidenewgame, 1000)
            }
            else if(amount > owedfunds){
                decide.innerHTML = `You overpaid 👨‍🌾`
                setTimeout(decidenewgame, 1000)
            }
        }


        function claimDecide(myoutcome){
            realoutcome = comparehands()[typeofbet.textContent]
            if(myoutcome == "win"){
                if(realoutcome > 0 && !(game.startsWith("blackjack") && realoutcome == 1)){
                    decide.innerHTML = `Pay 👨‍🌾 for his <span id='typeofbet'>${typeofbet.textContent}</span>: $<span id="theamount">_</span>`
                    chips.style.display = ""
                    owedfunds = realoutcome * bids[thebettype].reduce((x, y) => { return x + y }, 0)
                }
                else if(realoutcome == 0){
                    decide.innerHTML = `Wrong, it's a push!`
                    setTimeout(decidenewgame, 1000)
                }
                else if(realoutcome < 0){
                    decide.innerHTML = `Wrong, 👨‍🌾 loses!`
                    setTimeout(decidenewgame, 1000)
                }
                else{
                    decide.innerHTML = "Correct!"
                    setTimeout(decidenewgame, 1000)
                }
            }
            else if(myoutcome == "push"){
                if(realoutcome == 0){
                    decide.innerHTML = "Correct!"
                }
                else{
                    decide.innerHTML = `Wrong, 👨‍🌾 ${realoutcome > 0 ? "wins": "loses"}!`
                }
                setTimeout(decidenewgame, 1000)
            }
            else if(myoutcome == "loss"){
                if(realoutcome < 0){
                    decide.innerHTML = "Correct!"
                }
                else if(realoutcome == 0){
                    decide.innerHTML = "Wrong, it's a push!"
                }
                else if(realoutcome > 0){
                    decide.innerHTML = "Wrong, 👨‍🌾 wins!"
                }
                setTimeout(decidenewgame, 1000)
            }
        }

        function changeGame(){
            game = thegame.value
            war_content.style.display = game == "war" ? "block" : "none"
            blackjack_content.style.display = ["blackjack", "blackjack-freebet"].includes(game) ? "block" : "none"
            threecardpoker_content.style.display = game == "threecardpoker" ? "block" : "none"
            mississippi_content.style.display = game == "mississippi" ? "block" : "none"
            letitride_content.style.display = game == "letitride" ? "block" : "none"
            texas_content.style.display = game == "texas" ? "block" : "none"
            doubledraw_content.style.display = game == "doubledraw" ? "block" : "none"
            newGame()
        }


        function decidenewgame(){
            bidcount++
            if(bidcount == bidstomake[game].length){
                bidcount = 0
                newGame()
            }
            else{
                amount = owedfunds = 0
                thebettype = bidstomake[game][bidcount]
                chips.style.display = "none"
                decide.innerHTML = `👨‍🌾's <span id='typeofbet'>${thebettype}</span> is a (<span onclick="claimDecide('win')">WIN</span> / <span onclick="claimDecide('push')">PUSH</span> / <span onclick="claimDecide('loss')">LOSS</span>)`
            }
        }


        function newGame(){
            bidcount = 0
            bidsdiv.innerHTML = ""
            playerhand = dealerhand = playerhand2 = ""
            anteplay = [
                [25, 5],
                [500, 100, 25],
                [25, 25, 5, 5],
                [100, 100],
                [5, 5],
                [500, 100],
                [25, 25, 5],
                [25, 25, 25],
                [100, 25],
                [100, 5, 5],
                [1000, 500],
              //  [5, 5, 1],
            ]


            //
            
            amount = owedfunds = 0
            chips.style.display = "none"
            if(game == "doubledeck"){
                shuffleddeck = Array.from(jokerfrenchdeck)
            }
            else{
                shuffleddeck = Array.from(frenchdeck)
            }


            shuffleddeck = shuffleArray(shuffleddeck)

            if(game == "texas") shuffleddeck = Array.from("🃂🃃🃄🃅🃆🃇🃈🃉🃊🃋🃍")

            playercards.innerHTML = dealercards.innerHTML = ""

            if(game == "threecardpoker"){
                playerhand += shuffleddeck.pop()
                playerhand += shuffleddeck.pop()
                playerhand += shuffleddeck.pop()

                dealerhand += shuffleddeck.pop()
                dealerhand += shuffleddeck.pop()
                dealerhand += shuffleddeck.pop()
            }
            else if(game == "mississippi"){
                playerhand += shuffleddeck.pop()
                playerhand += shuffleddeck.pop()

                dealerhand += shuffleddeck.pop()
                dealerhand += shuffleddeck.pop()
                dealerhand += shuffleddeck.pop()
            }
            else if(game == "letitride"){
                playerhand += shuffleddeck.pop()
                playerhand += shuffleddeck.pop()
                playerhand += shuffleddeck.pop()

                dealerhand += shuffleddeck.pop()
                dealerhand += shuffleddeck.pop()
            }
            else if(game == "doubledraw"){
                playerhand += shuffleddeck.pop()
                playerhand += shuffleddeck.pop()
                playerhand += shuffleddeck.pop()
                playerhand += shuffleddeck.pop()
                playerhand += shuffleddeck.pop()
            }
            else if(game == "texas"){
                playerhand += shuffleddeck.pop()
                playerhand += shuffleddeck.pop()

                middlehand += shuffleddeck.pop()
                middlehand += shuffleddeck.pop()
                middlehand += shuffleddeck.pop()
                middlehand += shuffleddeck.pop()
                middlehand += shuffleddeck.pop()

                dealerhand += shuffleddeck.pop()
                dealerhand += shuffleddeck.pop()
            }
            else if(game == "war"){
                playerhand += shuffleddeck.pop()
                dealerhand += shuffleddeck.pop()
                if(cardname[playerhand][0] == cardname[dealerhand][0]){
                    dealerhand += "🂠🂠🂠"
                    playerhand += shuffleddeck.pop()
                    dealerhand += shuffleddeck.pop()
                }
            }
            else if(game.startsWith("blackjack")){
                playerhand += shuffleddeck.pop()
                playerhand += shuffleddeck.pop()

                dealerhand += shuffleddeck.pop()
                dealerhand += shuffleddeck.pop()

                while(("" + analyzeThisHand(playerhand, "blackjack")).split("/")[0] < 17){
                    playerhand += shuffleddeck.pop()
                }
                while(("" + analyzeThisHand(dealerhand, "blackjack")).split("/")[0] < 17){
                    dealerhand += shuffleddeck.pop()
                }

                if(game.includes("freebet")){
                    if(Math.random() > .9) playerhand += "🟡"
                }                
            
                //

                playerhand2 += shuffleddeck.pop()
                playerhand2 += shuffleddeck.pop()

                while(("" + analyzeThisHand(playerhand2, "blackjack")).split("/")[0] < 17){
                    playerhand2 += shuffleddeck.pop()
                }
                if(game.includes("freebet")){
                    playerhand2 += "🟡"
                    if(Math.random() > .9) playerhand2 += "🟡"
                }
            }

            bidstomake = {
                threecardpoker: ["ante", "play", "pairplus"],
                mississippi: ["ante", "3rd street", "4th street", "5th street"],
                letitride: ["ante", "2nd ante", "3rd ante"],
                texas: ["ante", "play"],
                blackjack: ["ante"],
                doubledraw: ["ante", "bonus", "first draw", "second draw"],
                "blackjack-switch": ["ante"],
                "blackjack-freebet": ["ante"],
                war: ["ante", "tie"],
            }

            twopeople = false
            if(game == "blackjack-switch") twopeople = true
            else if(game.startsWith("blackjack")){
                twopeople = (analyzeThisHand(Array.from(playerhand)[0], "blackjack") == analyzeThisHand(Array.from(playerhand2)[0], "blackjack") && analyzeThisHand(Array.from(playerhand)[0], "blackjack") != 10) ? true : false
            }

            secondhand.style.display = twopeople ? "block" : "none"

            if(twopeople){
                bidstomake[game].shift()
                bidstomake[game].unshift("ante (#2)")
                bidstomake[game].unshift("ante (#1)")
            }
            
            thebettype = bidstomake[game][0]
            decide.innerHTML = `👨‍🌾's <span id='typeofbet'>${thebettype}</span> is a (<span onclick="claimDecide('win')">WIN</span> / <span onclick="claimDecide('push')">PUSH</span> / <span onclick="claimDecide('loss')">LOSS</span>)`
            playercards.innerHTML = cardcolor(playerhand)
            if(twopeople) playercards2.innerHTML = cardcolor(playerhand2)
            if(middlehand != "") middlecards.innerHTML = cardcolor(middlehand)
            dealercards.innerHTML = cardcolor(dealerhand)


            for(btm of Object.values(bidstomake[game])){
                if(btm == "ante (#2)") bids[btm] = bids["ante (#1)"]
                else if(btm == "play") bids[btm] = bids.ante
                else if(game == "doubledraw" || game == "letitride") bids[btm] = bids.ante
                else bids[btm] = anteplay[Math.floor(anteplay.length * Math.random())]
                
                if(btm == "ante" && game == "war" && dealerhand.includes("🂠")) bids.ante = Array(2).fill(bids.ante).flat().sort(function(a, b){return b-a})
                else if(btm.includes("street") && game == "mississippi") bids[btm] = Array(Math.ceil(Math.random() * 3)).fill(bids.ante).flat().sort(function(a, b){return b-a})
                else if(btm == "play" && game == "texas") bids[btm] = Array(Math.ceil(Math.random() * 4)).fill(bids.ante).flat().sort(function(a, b){return b-a})
                bidsdiv.innerHTML += `<div class="chiplist">${btm} ${bids[btm].map(ap => `<button class="smallchip chip_${ap}">${("" + ap).replace("000", "k")}</button>`).join("")}</div>`
            }
        }


        function cardcolor(text){
            return Array.from(text).map(x => `<span style="color:${"🂲🂳🂴🂵🂶🂷🂸🂹🂺🂻🂽🂾🂱🃂🃃🃄🃅🃆🃇🃈🃉🃊🃋🃍🃎🃁".includes(x) ? "#f57738" : "white"}" >${x}</span>`).join("")
        }


        function analyzeThisHand(it, classification){
            if(classification == "threecardpoker"){
                // 5 straight flush, 4 three of a kind, 3 straight, 2 flush, 1 pair, 0 nothing
                trescards = Array.from(it).map(x => cardname[x]).sort((a, b) => cardorder.indexOf(b[0]) - cardorder.indexOf(a[0]))
                if((trescards[0][1] == trescards[1][1] && trescards[1][1] == trescards[2][1]) && "AKQ" == (trescards[0][0] + trescards[1][0] + trescards[2][0])){
                    level = 6 //royalflush
                }
                else if((trescards[0][1] == trescards[1][1] && trescards[1][1] == trescards[2][1]) && threecardstraightorder.includes(trescards[0][0] + trescards[1][0] + trescards[2][0])){
                    level = 5 //straightflush
                }
                else if(trescards[0][0] == trescards[1][0] && trescards[1][0] == trescards[2][0]){
                    level = 4 //3kind
                }
                else if(threecardstraightorder.includes(trescards[0][0] + trescards[1][0] + trescards[2][0])){
                    level = 3 //straight
                }
                else if(trescards[0][1] == trescards[1][1] && trescards[1][1] == trescards[2][1]){
                    level = 2 //flush
                }
                else if(trescards[0][0] == trescards[1][0] || trescards[1][0] == trescards[2][0] || trescards[2][0] == trescards[0][0]){
                    level = 1 //pair
                }
                else{
                    level = 0 //highcard
                }
                return [level, trescards[0][0] + trescards[1][0] + trescards[2][0]]
            }
            else if(classification == "mississippi" || classification == "texas" || classification == "doubledraw" || classification == "letitride"){
                cincocards = Array.from(it).map(x => cardname[x]).sort((a, b) => jokercardorder.indexOf(b[0]) - jokercardorder.indexOf(a[0]))

                straights = [
                    "AKQJT",
                    "KQJT9", 
                    "QJT98", 
                    "JT987", 
                    "T9876", 
                    "98765", 
                    "87654", 
                    "76543", 
                    "65432", 
                    "5432A"
                ]
                //
                handinfo = {
                    ones: "",
                    pairs: "",
                    threes: "",
                    fours: "",
                    fives: "",
                    hearts: "",
                    diamonds: "",
                    clubs: "",
                    spades: "",
                    wilds: "",
                }

                //
                for(cin of cincocards){


                    if(cin[0] == "W"){
                        if(!handinfo.ones.includes("A")){
                            handinfo.ones += "A"
                        }
                        else if(!handinfo.pairs.includes("A")){
                            handinfo.pairs += "A"
                        }
                        else if(!handinfo.threes.includes("A")){
                            handinfo.threes += "A"
                        }
                        else if(!handinfo.fours.includes("A")){
                            handinfo.fours += "A"
                        }
                        else if(!handinfo.fives.includes("A")){
                            handinfo.fives += "A"
                        }
                        handinfo.wilds += "W"
                    }
                    else{
                        if(!handinfo.ones.includes(cin[0])){
                            handinfo.ones += cin[0]
                        }
                        else if(!handinfo.pairs.includes(cin[0])){
                            handinfo.pairs += cin[0]
                        }
                        else if(!handinfo.threes.includes(cin[0])){
                            handinfo.threes += cin[0]
                        }
                        else if(!handinfo.fours.includes(cin[0])){
                            handinfo.fours += cin[0]
                        }
                        else if(!handinfo.fives.includes(cin[0])){
                            handinfo.fives += cin[0]
                        }

                        if(cin[1] == "H") handinfo.hearts += cin[0]
                        else if(cin[1] == "S") handinfo.spades += cin[0]
                        else if(cin[1] == "C") handinfo.clubs += cin[0]
                        else if(cin[1] == "D") handinfo.diamonds += cin[0]
                    }

                }

                for(ff of ["clubs", "hearts", "diamonds", "spades", "ones"]) if(handinfo[ff].includes("A")) handinfo[ff] += "A"

                console.log(handinfo)
                //

                //

                
                level = "nothing"
                base = ""
                kicker = handinfo.ones.slice(0, 5)
                if(handinfo.pairs.length == 1){
                    if("AKQJ".includes(handinfo.pairs[0])){
                        level = "high-pair"
                    }
                    else if("T" == handinfo.pairs[0]){
                        level = "ten-pair"
                    }
                    else if("6789".includes(handinfo.pairs[0])){
                        level = "mid-pair"
                    }
                    else{
                        level = "low-pair"
                    }
                    base = handinfo.pairs[0]
                    kicker = handinfo.ones.replace(base, "").slice(0, 3)
                }
                                //
                if(handinfo.pairs.length >= 2){
                    level = "two pair"
                    base = handinfo.pairs.slice(0, 2)
                    kicker = handinfo.ones.replace(base[0], "").replace(base[1], "")[0]
                }

                if(handinfo.threes.length > 0){
                    level = "three of a kind"
                    base = handinfo.threes[0]
                    kicker = handinfo.ones.replace(base, "").slice(0, 2)
                }

                if(straights.map(x => handinfo.ones.includes(x)).reduce((a, c) => a || c)){
                    level = "straight"
                    base = straights.filter(x => handinfo.ones.includes(x))[0]
                    kicker = ""
                }

                if(wilds == "WW"){
                    if(handinfo.clubs.length >= 3 || handinfo.diamonds.length >= 3 || handinfo.hearts.length >= 3 || handinfo.spades.length >= 3){
                        level = "flush"
                        base = "AA" + [handinfo.clubs.slice(0, 3), handinfo.diamonds.slice(0, 3), handinfo.hearts.slice(0, 3), handinfo.spades.slice(0, 3)].filter(x => x.length == 3)[0] //works if we have seven cards or less lol
                        kicker = ""
                    }
                }
                else if(wilds == "W"){
                    if(handinfo.clubs.length >= 4 || handinfo.diamonds.length >= 4 || handinfo.hearts.length >= 4 || handinfo.spades.length >= 4){
                        level = "flush"
                        base = "A" + [handinfo.clubs.slice(0, 4), handinfo.diamonds.slice(0, 4), handinfo.hearts.slice(0, 4), handinfo.spades.slice(0, 4)].filter(x => x.length == 5)[0] //works if we have nine cards or less lol
                        kicker = ""
                    }
                }
                else{ //bruh
                    if(handinfo.clubs.length >= 5 || handinfo.diamonds.length >= 5 || handinfo.hearts.length >= 5 || handinfo.spades.length >= 5){
                        level = "flush"
                        base = [handinfo.clubs.slice(0, 5), handinfo.diamonds.slice(0, 5), handinfo.hearts.slice(0, 5), handinfo.spades.slice(0, 5)].filter(x => x.length == 5)[0] //works if we have nine cards or less lol
                        kicker = ""
                    }
                }
                if(handinfo.threes.length > 0 && handinfo.pairs.length > 1){
                    level = "full house"
                    base = handinfo.threes[0]
                    base += handinfo.pairs.replace(base, "")[0]
                    kicker = ""
                }
                if(handinfo.fours.length > 0){
                    level = "four of a kind"
                    base = handinfo.fours[0]
                    kicker = handinfo.ones.replace(base, "")[0]
                }
                if(straights.map(x => handinfo.clubs.includes(x) || handinfo.diamonds.includes(x) || handinfo.hearts.includes(x) || handinfo.spades.includes(x)).reduce((a, c) => a || c)){
                    level = "straight flush"
                    base = straights.filter(x => handinfo.clubs.includes(x) || handinfo.diamonds.includes(x) || handinfo.hearts.includes(x) || handinfo.spades.includes(x))[0]
                    kicker = ""
                }
                for(st of ["clubs", "diamonds", "hearts", "spades"]){
                    if(
                        (handinfo.wilds == "W" && (handinfo[st].startsWith("AKQJ") || handinfo[st].startsWith("AQJT") || handinfo[st].startsWith("AKJT") || handinfo[st].startsWith("AKQT") || handinfo[st].startsWith("AKQJ"))) ||
                        (handinfo.wilds == "WW" && (handinfo[st].startsWith("AKQ") || handinfo[st].startsWith("AKJ") || handinfo[st].startsWith("AKT") || handinfo[st].startsWith("AQJ") || handinfo[st].startsWith("AQT") || handinfo[st].startsWith("KQJ") || handinfo[st].startsWith("KQT") || handinfo[st].startsWith("KJT") || handinfo[st].startsWith("QJT") ))
                    ){
                        level = "wild royal flush"
                        base = "AKQJT"
                        kicker = ""
                    }
                }
                if(handinfo.hearts.startsWith("AKQJT") || handinfo.clubs.startsWith("AKQJT") || handinfo.diamonds.startsWith("AKQJT") || handinfo.spades.startsWith("AKQJT")){
                    level = "royal flush"
                    base = "AKQJT"
                    kicker = ""
                }
                if(handinfo.fives.includes("A")){
                    level = "five of a kind"
                    base = "AAAAA"
                    kicker = ""
                }
                base = base.replace(/W/g, "A")
                kicker = kicker.replace(/W/g, "A")
                return [level, base, kicker]
            }
            else if(classification == "war"){
                return cardorder.indexOf(cardname[Array.from(it).slice(-1)[0]][0])
            }
            else if(classification.startsWith("blackjack")){
                it = it.replace(/🟡/g, "")
                normalvalue = Array.from(it).map(x => isNaN(cardname[x][0]) ? {T: 10, J: 10, Q: 10, K: 10, A: 1}[cardname[x][0]] : cardname[x][0])
                normalvalueadded = normalvalue.reduce((x, y) => +x + +y, 0)
                return ((normalvalue.includes(1) && normalvalueadded <= 11) ? ((+normalvalueadded + 10) + "/") : "") + normalvalueadded
            }
        }


        function comparehands(){
            if(twopeople) PPpoints = analyzeThisHand(playerhand2, game)
            if(game == "mississippi" || game == "letitride"){
                Ppoints = analyzeThisHand(playerhand + dealerhand, game)
            }
            else if(game == "texas"){
                Ppoints = analyzeThisHand(playerhand + middlehand, game)
                Dpoints = analyzeThisHand(dealerhand + middlehand, game)
            }
            else{
                Ppoints = analyzeThisHand(playerhand, game)
                if(game != "doubledraw") Dpoints = analyzeThisHand(dealerhand, game)
            }

            console.log(Ppoints)

            if(game == "threecardpoker"){
                ante = -1
                play = 0
                pairplus = -1
                if(Ppoints[0] > Dpoints[0]){
                    ante = 1
                }
                else if(Ppoints[0] == Dpoints[0]){
                    if(Ppoints[1] == Dpoints[1]){
                        ante = 0
                    }
                    else if(Ppoints[0] == 5 || Ppoints[0] == 3){
                        if(threecardstraightorder.indexOf(Ppoints[1]) < threecardstraightorder.indexOf(Dpoints[1])){
                            ante = 1     
                        }
                    }
                    else if(Ppoints[0] == 4){
                        if(cardorder.indexOf(Ppoints[1][0]) > cardorder.indexOf(Dpoints[1][0])){
                            ante = 1    
                        }
                    }
                    else if(Ppoints[0] == 2 || Ppoints[0] == 0){
                        if(Dpoints[0] == 0 && !"AKQ".includes(Dpoints[1][0])){
                            ante = 1
                        }
                        else if(cardorder.indexOf(Ppoints[1][0]) > cardorder.indexOf(Dpoints[1][0])){
                            ante = 1     
                        }
                        else if(Ppoints[1][0] == Dpoints[1][0] && cardorder.indexOf(Ppoints[1][1]) > cardorder.indexOf(Dpoints[1][1])){
                            ante = 1     
                        }
                        else if(Ppoints[1][0] == Dpoints[1][0] && Ppoints[1][1] == Dpoints[1][1] && cardorder.indexOf(Ppoints[1][2]) > cardorder.indexOf(Dpoints[1][2])){
                            ante = 1     
                        }
                    }
                    else if(Ppoints[0] == 1){
                        if(cardorder.indexOf(Ppoints[1][1]) > cardorder.indexOf(Dpoints[1][1])){
                            ante = 1    
                        }
                        else if(Ppoints[1][1] == Dpoints[1][1] && (cardorder.indexOf(Ppoints[1][0]) > cardorder.indexOf(Dpoints[1][0]) || cardorder.indexOf(Ppoints[1][2]) > cardorder.indexOf(Dpoints[1][2]))){
                            ante = 1    
                        }
                    }
                }

                if(ante > 0 && (Dpoints[0] > 0 || "AKQ".includes(Dpoints[1][0]))) play = 1
                else if(ante < 0 && (Ppoints[0] == 0 || "AKQ".includes(Ppoints[1][0]))) play = -1

                //ante bonus

                if(antebonus.value == "yes"){
                    if(Ppoints[0] == 1) pairplus = 1
                    else if(Ppoints[0] == 2) pairplus = 3
                    else if(Ppoints[0] == 3){
                        pairplus = 6
                        ante++
                    }
                    else if(Ppoints[0] == 4){
                        pairplus = 30
                        ante += 4
                    }
                    else if(Ppoints[0] == 5){
                        pairplus = pairplusstraightflush.value
                        ante += 5
                    }
                    else if(Ppoints[0] == 6){
                        pairplus = pairplusminiroyal.value
                        ante += +miniroyal.value //MINI ROYAL BONUS
                    }
                }


                return {ante: ante, play: play, pairplus: pairplus}
            }
            else if(game == "mississippi"){
                multiplier = {"nothing": -1, "low-pair": 0, "mid-pair": 0, "ten-pair": 0, "high-pair": 1, "two pair": 2, "three of a kind": 3, "straight": 4, "flush": 6, "full house": 10, "four of a kind": 40, "straight flush": 100, "royal flush": 500}[Ppoints[0]]
                return {ante: multiplier, "3rd street": multiplier, "4th street": multiplier, "5th street": multiplier}
            }
            else if(game == "letitride"){
                multiplier = {"nothing": -1, "low-pair": -1, "mid-pair": -1, "ten-pair": 1, "high-pair": 1, "two pair": 2, "three of a kind": 3, "straight": 5, "flush": 8, "full house": 11, "four of a kind": 50, "straight flush": 200, "royal flush": 1000}[Ppoints[0]]
                return {ante: multiplier, "2nd ante": multiplier, "3rd ante": multiplier}
            }
            else if(game == "texas"){
                wincondition = false
                if(pokercomparehands(Ppoints, Dpoints) == "win"){
                    multiplier = {"nothing": -1, "low-pair": -1, "mid-pair": 0, "ten-pair": 0, "high-pair": 1, "two pair": 2, "three of a kind": 3, "straight": 4, "flush": 6, "full house": 10, "four of a kind": 40, "straight flush": 100, "royal flush": 500}[Ppoints[0]]
                }
                else if(pokercomparehands(Ppoints, Dpoints) == "tie"){
                    multiplier = 0
                }
                else{
                    multiplier = -1
                }
                return {ante: multiplier, "play": multiplier} //fix
            }
            else if(game == "doubledraw"){
                multiplier = {"nothing": -1, "low-pair": -1, "mid-pair": -1, "ten-pair": -1, "high-pair": -1, "two pair": 0, "three of a kind": 1, "straight": 2, "flush": 3, "full house": 5, "four of a kind": 20, "straight flush": 50, "royal flush": 100, "five of a kind": 500}[Ppoints[0]]
                if(multiplier >= 0) return {ante: 1, bonus: multiplier, "first draw": 1, "second draw": 1}
                else return {ante: -1, bonus: -1, "first draw": -1, "second draw": -1} 
            }
            else if(game == "war"){
                tie = -1
                ante = 0
                if(dealerhand.includes("🂠")){
                    tie = 10
                    if(Ppoints > Dpoints) ante = 0.5
                    else if(Ppoints < Dpoints) ante = -1
                    else ante = doubletiebonus.value == "double" ? 1 : 0.5
                }
                else{
                    if(Ppoints > Dpoints) ante = 1
                    else if(Ppoints < Dpoints) ante = -1
                }
                return {ante: ante, tie: tie}
            }
            else if(game == "blackjack"){
                ante = -1
                if(("" + Ppoints).split("/")[0] >= 22) ante = -1
                else if(Ppoints == "21/11" && Dpoints != "21/11") ante = blackjackbonus.value
                else if(("" + Ppoints).split("/")[0] > ("" + Dpoints).split("/")[0]) ante = 1
                else if(("" + Dpoints).split("/")[0] > 21 && ("" + Ppoints).split("/")[0] < 22) ante = 1
                else if(("" + Ppoints).split("/")[0] == ("" + Dpoints).split("/")[0]) ante = 0


                if(twopeople){
                    ante2 = -1
                    if(("" + PPpoints).split("/")[0] >= 22) ante2 = -1
                    else if(PPpoints == "21/11" && Dpoints != "21/11") ante2 = blackjackbonus.value
                    else if(("" + PPpoints).split("/")[0] > ("" + Dpoints).split("/")[0]) ante2 = 1
                    else if(("" + Dpoints).split("/")[0] > 21 && ("" + PPpoints).split("/")[0] < 22) ante2 = 1
                    else if(("" + PPpoints).split("/")[0] == ("" + Dpoints).split("/")[0]) ante2 = 0
                    return {"ante (#1)": ante, "ante (#2)": ante2}
                }
                return {ante: ante}
            }
            else if(game == "blackjack-switch"){
                ante = -1
                if(("" + Ppoints).split("/")[0] >= 22) ante = -1
                else if(("" + Dpoints).startsWith("22")) ante = 0
                else if(Ppoints == "21/11" && Dpoints != "21/11") ante = 1
                else if(("" + Ppoints).split("/")[0] > ("" + Dpoints).split("/")[0]) ante = 1
                else if(("" + Dpoints).split("/")[0] > 21 && ("" + Ppoints).split("/")[0] < 22) ante = 1
                else if(("" + Ppoints).split("/")[0] == ("" + Dpoints).split("/")[0]) ante = 0
                

                ante2 = -1
                if(PPpoints >= 22) ante2 = -1
                else if(("" + Dpoints).startsWith("22")) ante2 = 0
                else if(PPpoints == "21/11" && Dpoints != "21/11") ante2 = blackjackbonus.value
                else if(("" + PPpoints).split("/")[0] > ("" + Dpoints).split("/")[0]) ante2 = 1
                else if(("" + Dpoints).split("/")[0] > 21 && ("" + PPpoints).split("/")[0] < 22) ante2 = 1
                else if(("" + PPpoints).split("/")[0] == ("" + Dpoints).split("/")[0]) ante2 = 0
                
                return {"ante (#1)": ante, "ante (#2)": ante2}
            }
            else if(game == "blackjack-freebet"){
                ante = -1
                if(("" + Ppoints).split("/")[0] >= 22) ante = -1
                else if(("" + Dpoints).startsWith("22")) ante = 0
                else if(Ppoints == "21/11" && Dpoints != "21/11") ante = blackjackbonus.value
                else if(("" + Ppoints).split("/")[0] > ("" + Dpoints).split("/")[0]) ante = 1
                else if(("" + Dpoints).split("/")[0] > 21 && ("" + Ppoints).split("/")[0] < 22) ante = 1
                else if(("" + Ppoints).split("/")[0] == ("" + Dpoints).split("/")[0]) ante = 0

                if(twopeople){
                    doublegold = playerhand2.includes("🟡🟡") ? 2 : 1
                    ante2 = -1
                    if(("" + PPpoints).split("/")[0] >= 22) ante2 = -1
                    else if(("" + Dpoints).startsWith("22")) ante = 0
                    else if(PPpoints == "21/11" && Dpoints != "21/11") ante2 = blackjackbonus.value
                    else if(("" + PPpoints).split("/")[0] > ("" + Dpoints).split("/")[0]) ante2 = 2 * doublegold
                    else if(("" + Dpoints).split("/")[0] > 21 && ("" + PPpoints).split("/")[0] < 22) ante2 = 2 * doublegold
                    else if(("" + PPpoints).split("/")[0] == ("" + Dpoints).split("/")[0]) ante2 = 2 * doublegold
                    return {"ante (#1)": ante, "ante (#2)": ante2}
                }
                return {ante: ante}
            }
        }


        handhierarchy = ["five of a kind", "royal flush", "straight flush", "four of a kind", "full house", "flush", "straight", "three of a kind", "two pair", "high-pair", "ten-pair", "mid-pair", "low-pair", "nothing"]


        function shuffleArray(array) {
            for (i = array.length - 1; i > 0; i--) {
                j = Math.floor(Math.random() * (i + 1))
                b = array[i]
                c = array[j]
                array[j] = b
                array[i] = c
            }
            return array
        }


        function togle(){
            antebonuscontent.style.display = {'none': '', '': 'none'}[antebonuscontent.style.display]
        }

        function pokercomparehands(pl, dl){
            console.log(pl)
            console.log(dl)
            if(handhierarchy.indexOf(pl[0]) < handhierarchy.indexOf(dl[0])) return "win"
            else if(handhierarchy.indexOf(pl[0]) > handhierarchy.indexOf(dl[0])) return "loss"
            else if(pl[0] == dl[0] && pl[1] == dl[1] && pl[2] == pl[2]){
                return "tie"
            }
            else{
                if(pl[0].includes("straight")){
                    return cardorder.indexOf(pl[1][0]) > cardorder.indexOf(dl[1][0]) ? "win" : "loss"
                    //invent ties
                }
                else if(pl[0] == "four of a kind"){
                    if(cardorder.indexOf(pl[1][0]) == cardorder.indexOf(dl[1][0])){
                        return cardorder.indexOf(pl[2]) > cardorder.indexOf(dl[2]) ? "win" : "loss"
                    }
                    else return cardorder.indexOf(pl[1][0]) > cardorder.indexOf(dl[1][0]) ? "win" : "loss"
                }
                else if(pl[0] == "full house"){
                    
                }
                else if(pl[0] == "flush"){
                    
                }

                else if(pl[0] == "three of a kind"){
                    
                }
                else if(pl[0] == "two pair"){
                    
                }
                else if(pl[0].includes("pair")){
                    
                }
                else if(pl[0] == "nothing"){

                } //this, jokers completing straights, texas open rules
            }
        }

        changeGame()
    </script>
</html>